"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["frosh-product-compare"],{5130:(t,e,s)=>{var o=s(6285),r=s(8254),i=s(4690),n=s(6656);function a(t,e,s){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var s=t[Symbol.toPrimitive];if(void 0!==s){var o=s.call(t,e||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}class c{static getAddedProductsList(){let t=n.Z.getItem(this.key);try{t=JSON.parse(t)||[]}catch(e){this.clear(),t={}}return this._checkCompareProductStorage(t)?t:(this.clear(),{})}static add(t){const e=this.getAddedProductsList(),s=e.length;return document.$emitter.publish("beforeAddProductCompare",{productCount:s}),!(s+1>this.maximumCompareProducts)&&(e.push(t),this.persist(e),!0)}static remove(t){const e=this.getAddedProductsList(),s=e.indexOf(t);return-1!==s&&(e.splice(s,1),this.persist(e),!0)}static persist(t){n.Z.setItem(this.key,JSON.stringify(t)),document.$emitter.publish("changedProductCompare",{products:t})}static clear(){n.Z.setItem(this.key,null)}static _checkCompareProductStorage(t){return t.length<=this.maximumCompareProducts}}a(c,"key","compare-widget-added-products"),a(c,"maximumCompareProducts",4);const d=c;class l extends o.Z{init(){this._client=new r.Z,this._clearBtn=this.el.querySelector(".btn-clear"),this._printBtn=this.el.querySelector(".btn-printer"),this.registerShowDifferencesBtnEvent(),this.insertStoredContent(),this._registerEvents()}registerShowDifferencesBtnEvent(){const t=document.querySelector(".btn-show-differences");t.addEventListener("change",(()=>{if(t.checked){document.querySelectorAll("tbody#specification tr.property:not(:first-child)").forEach((t=>{const e=Array.from(t.querySelectorAll("td.properties-value")).map((t=>t.textContent.trim()));e.every((t=>t===e[0]))&&(t.style.display="none")}))}else{document.querySelectorAll("tbody#specification tr.property").forEach((t=>{t.style.display="table-row"}))}}))}insertStoredContent(){this.fetch()}fetch(){const t={};t.productIds=d.getAddedProductsList(),i.Z.create(this.el),this._client.post(window.router["frontend.compare.content"],JSON.stringify(t),(t=>{i.Z.remove(this.el),this.renderCompareProducts(t),this.$emitter.publish("insertStoredContent",{response:t})}))}renderCompareProducts(t){this.el.querySelector(".compare-product-content").innerHTML=t,window.PluginManager.initializePlugins()}_registerEvents(){document.$emitter.subscribe("removeCompareProduct",(t=>{const e=this.el.querySelector("table"),s=e.rows;if(2===e.querySelectorAll("thead tr td").length)return e.style.display="none",d.clear(),void this.insertStoredContent();for(let e=0;e<s.length;e+=1)try{s[e].deleteCell(t.detail.product.productRow)}catch(t){}})),this._clearBtn.addEventListener("click",(()=>{d.clear(),this.fetch()})),this._printBtn.addEventListener("click",(()=>{window.print()}))}}class u extends o.Z{init(){this.REMOVE_COMPARE_PRODUCT_EVENT="removeCompareProduct",this._checkAddedProduct(),this._registerEvents(),this._removeAll()}_isAddedProduct(t){return d.getAddedProductsList().indexOf(t)>-1}_checkAddedProduct(){const{productId:t,addedText:e,isAddedToCompareClass:s}=this.options;this._isAddedProduct(t)&&e&&(this._toggleText(this.el,e),this.el.classList.add(s))}_toggleText(t,e){if(this.options.showIconOnly)return;const s=t.querySelector(".compare-button-text");s?s.textContent=e:t.textContent=e}_registerCompareButtonSelection(){const t=this.el,{isAddedToCompareClass:e,productId:s}=this.options;t.addEventListener("click",(()=>{try{if(t.classList.contains(e))this._handleBeforeRemove(),d.remove(s);else{d.add(s)&&this._handleBeforeAdd()}}catch(t){d.clear()}}))}_handleBeforeRemove(){const{defaultText:t,isAddedToCompareClass:e,productId:s}=this.options,o={productId:s};this.el.closest("td")?o.productRow=this.el.closest("td").cellIndex:this.el.closest(".offcanvas-comparison-item")?this.el.closest(".offcanvas-comparison-item").style.display="none":(this._toggleText(this.el,t),this.el.classList.remove(e)),document.$emitter.publish(this.REMOVE_COMPARE_PRODUCT_EVENT,{product:o})}_handleBeforeAdd(){const{addedText:t,isAddedToCompareClass:e}=this.options;this._toggleText(this.el,t),this.el.classList.add(e)}_registerEvents(){this._registerCompareButtonSelection();const{productId:t,isAddedToCompareClass:e,defaultText:s}=this.options;document.$emitter.subscribe(this.REMOVE_COMPARE_PRODUCT_EVENT,(o=>{o.detail.product.productId===t&&(this._toggleText(this.el,s),this.el.classList.remove(e))}))}_removeAll(){$(document).on("click","#removeAll",(function(t){t.preventDefault(),d.clear();var e=$("#owyshopLink").attr("data-shop-url");window.location.replace(e)}))}}var h,f,p;h=u,p={isAddedToCompareClass:"is-added-to-compare"},(f=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var s=t[Symbol.toPrimitive];if(void 0!==s){var o=s.call(t,e||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(f="options"))in h?Object.defineProperty(h,f,{value:p,enumerable:!0,configurable:!0,writable:!0}):h[f]=p;var m=s(9658),v=s(2615),b=s(378);class g extends o.Z{init(){this._button=this.el.querySelector(this.options.buttonSelector),this._defaultPadding=window.getComputedStyle(this._button).getPropertyValue("bottom"),this._badge=this._button.querySelector(".badge"),this._updateButtonCounter(d.getAddedProductsList()),this._addBodyPadding(),this._registerEvents()}_updateButtonCounter(t){const e=t.length;this._badge.innerText=e,0===e?this._button.classList.remove("is-visible"):this._button.classList.contains("is-visible")||this._button.classList.add("is-visible")}_registerEvents(){const t=m.Z.isTouchDevice()?"touchstart":"click";this._button&&this._button.addEventListener(t,(()=>{if($(".compare-menu-btn").hasClass("mobile-compare")){var t=$("#owyshopLink").attr("data-shop-url");window.location.replace(t+"/compare")}else{if($(".header-wishlist").children().children().hasClass("show")){$(".header-wishlist").children().children().removeClass("show");var e=$(".header-wishlist").children()[1];$(e).removeClass("show")}const t={productIds:d.getAddedProductsList()};$(".dropdown-menu").hasClass("owy-compare-inner-cart show")?$(".dropdown-menu").removeClass("owy-compare-inner-cart show"):$.post(window.router["frontend.compare.offcanvas"],JSON.stringify(t),(function(t){t.status&&t.productCount>0&&($(".owy-compare-cart").find(".dropdown-menu").addClass("owy-compare-inner-cart show"),$(".owy-compare-cart").find(".dropdown-menu").html(t.result))}))}this.$emitter.publish("onClickCompareFloatButton")})),document.$emitter.subscribe("beforeAddProductCompare",(t=>{const{productCount:e}=t.detail;if(e>=d.maximumCompareProducts){new b.Z(this.options.maximumNumberCompareProductsText).open()}})),document.$emitter.subscribe("changedProductCompare",(t=>{this._updateButtonCounter(t.detail.products)})),document.addEventListener("scroll",this._debouncedOnScroll,!1);new MutationObserver(this._addBodyPadding.bind(this)).observe(document.body,{attributes:!0,attributeFilter:["style"]})}_addBodyPadding(){this._button.style.bottom=`calc(${this._defaultPadding} + ${document.body.style.paddingBottom||"0px"})`}_openOffcanvas(){const t={productIds:d.getAddedProductsList()};v.Z.open(window.router["frontend.compare.offcanvas"],JSON.stringify(t),(t=>{this.$emitter.publish("insertStoredContent",{response:t})}))}}!function(t,e,s){(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var s=t[Symbol.toPrimitive];if(void 0!==s){var o=s.call(t,e||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s}(g,"options",{buttonSelector:".js-compare-float-button"});const C=window.PluginManager;C.register("AddToCompareButton",u,"[data-add-to-compare-button]"),C.register("CompareWidget",l,"[data-compare-widget]"),C.register("CompareFloat",g,"[data-compare-float]")},2615:(t,e,s)=>{s.d(e,{Z:()=>a});var o=s(3637),r=s(8254),i=s(7906);let n=null;class a extends o.Z{static open(t=!1,e=!1,s=null,r="left",i=!0,n=o.Z.REMOVE_OFF_CANVAS_DELAY(),a=!1,c=""){if(!t)throw new Error("A url must be given!");o.r._removeExistingOffCanvas();const d=o.r._createOffCanvas(r,a,c,i);this.setContent(t,e,s,i,n),o.r._openOffcanvas(d)}static setContent(t,e,s,o,c){const d=new r.Z;super.setContent(`<div class="offcanvas-body">${i.Z.getTemplate()}</div>`,o,c),n&&n.abort();const l=t=>{super.setContent(t,o,c),"function"==typeof s&&s(t)};n=e?d.post(t,e,a.executeCallback.bind(this,l)):d.get(t,a.executeCallback.bind(this,l))}static executeCallback(t,e){"function"==typeof t&&t(e),window.PluginManager.initializePlugins()}}},3637:(t,e,s)=>{s.d(e,{Z:()=>l,r:()=>d});var o=s(9658),r=s(2005),i=s(1966);const n="offcanvas",a=350;class c{constructor(){this.$emitter=new r.Z}open(t,e,s,o,r,i,n){this._removeExistingOffCanvas();const a=this._createOffCanvas(s,i,n,o);this.setContent(t,o,r),this._openOffcanvas(a,e)}setContent(t,e,s){const o=this.getOffCanvas();o[0]&&(o[0].innerHTML=t,this._registerEvents(s))}setAdditionalClassName(t){this.getOffCanvas()[0].classList.add(t)}getOffCanvas(){return document.querySelectorAll(`.${n}`)}close(t){const e=this.getOffCanvas();i.Z.iterate(e,(t=>{bootstrap.Offcanvas.getInstance(t).hide()})),setTimeout((()=>{this.$emitter.publish("onCloseOffcanvas",{offCanvasContent:e})}),t)}goBackInHistory(){window.history.back()}exists(){return this.getOffCanvas().length>0}_openOffcanvas(t,e){c.bsOffcanvas.show(),window.history.pushState("offcanvas-open",""),"function"==typeof e&&e()}_registerEvents(t){const e=o.Z.isTouchDevice()?"touchend":"click",s=this.getOffCanvas();i.Z.iterate(s,(e=>{const o=()=>{setTimeout((()=>{e.remove(),this.$emitter.publish("onCloseOffcanvas",{offCanvasContent:s})}),t),e.removeEventListener("hide.bs.offcanvas",o)};e.addEventListener("hide.bs.offcanvas",o)})),window.addEventListener("popstate",this.close.bind(this,t),{once:!0});const r=document.querySelectorAll(".js-offcanvas-close");i.Z.iterate(r,(s=>s.addEventListener(e,this.close.bind(this,t))))}_removeExistingOffCanvas(){c.bsOffcanvas=null;const t=this.getOffCanvas();return i.Z.iterate(t,(t=>t.remove()))}_getPositionClass(t){return"left"===t?"offcanvas-start":"right"===t?"offcanvas-end":`offcanvas-${t}`}_createOffCanvas(t,e,s,o){const r=document.createElement("div");if(r.classList.add(n),r.classList.add(this._getPositionClass(t)),!0===e&&r.classList.add("is-fullwidth"),s){const t=typeof s;if("string"===t)r.classList.add(s);else{if(!Array.isArray(s))throw new Error(`The type "${t}" is not supported. Please pass an array or a string.`);s.forEach((t=>{r.classList.add(t)}))}}return document.body.appendChild(r),c.bsOffcanvas=new bootstrap.Offcanvas(r,{backdrop:!1!==o||"static"}),r}}const d=Object.freeze(new c);class l{static open(t,e=null,s="left",o=!0,r=350,i=!1,n=""){d.open(t,e,s,o,r,i,n)}static setContent(t,e=!0,s=350){d.setContent(t,e,s)}static setAdditionalClassName(t){d.setAdditionalClassName(t)}static close(t=350){d.close(t)}static exists(){return d.exists()}static getOffCanvas(){return d.getOffCanvas()}static REMOVE_OFF_CANVAS_DELAY(){return a}}}},t=>{t.O(0,["vendor-node","vendor-shared"],(()=>{return e=5130,t(t.s=e);var e}));t.O()}]);