"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["acris-store-locator-c-s"],{161:(t,e,o)=>{var i=o(6285),s=o(8254),n=o(3206),r=o(9658),a=o(7606),l=o(8553),c=o(1857),h=o.n(c);const p=PluginManager.getPlugin("CookieConfiguration").get("class");class d extends p{_handleCheckbox(t){const{target:e}=t;e&&e.dataset&&e.dataset.cookie&&e.dataset.cookie===this.options.defaultCookie&&document.$emitter.publish("AcrisStoreLocatorCookieConfiguration_Change",e.checked),super._handleCheckbox(t)}}var u,m,f;u=d,m="options",f=h()(p.options,{defaultCookie:"store-locator-cookie"}),(m=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var i=o.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(m))in u?Object.defineProperty(u,m,{value:f,enumerable:!0,configurable:!0,writable:!0}):u[m]=f;class g extends i.Z{init(){this.isCookieIsSet(this),this._subscribeEvents()}initVars(){this.google=window.google||{},this.maps=this.google.maps||{},(this.options.zoomFactor<0||null==this.options.zoomFactor||""===this.options.zoomFactor)&&(this.options.zoomFactor=10),(this.options.widthInfowindow<0||null==this.options.widthInfowindow||""===this.options.widthInfowindow)&&(this.options.widthInfowindow=220),(this.options.heightInfowindow<0||null==this.options.heightInfowindow||""===this.options.heightInfowindow)&&(this.options.heightInfowindow=20),this.markers=[],this.bounds=new this.maps.LatLngBounds,this._client=new s.Z(window.accessKey,window.contextToken),this.loadingMapOnce=!0}registerEvents(){this.form&&this.form.addEventListener("submit",this.onTriggerRequest.bind(this))}_subscribeEvents(){document.$emitter.subscribe(l.Du,(t=>{let e=!1;void 0!==t.detail["store-locator-cookie"]&&(e=t.detail["store-locator-cookie"]),this.isCookieIsSet(this,!0,e)}))}onTriggerRequest(t){t.preventDefault(),this.mapRequest()}mapRequest(){if(null!==this.form.elements["locator[place]"].value){const t=new this.maps.Geocoder;this.geocodeAddress(t,this.map,this.form.elements["locator[place]"].value,!0)}}geocodeAddress(t,e,o,i){o||(o=this.options.mapCenterLocation),"1"===this.options.storeLocatorElement&&(o=this.options.storeLocatorBackUpAddressName),t.geocode({address:o,componentRestrictions:{country:"CH"}},((t,o)=>{if("OK"===o)if("1"===this.options.storeLocatorElement){const t={lat:this.options.storeLocatorLatitude,lng:this.options.storeLocatorLongitude};e.setCenter(t),this.marker=new this.maps.Marker({map:e}),i&&this.sendDataToController(this.options.storeLocatorLatitude,this.options.storeLocatorLongitude)}else e.setCenter(t[0].geometry.location),this.marker=new this.maps.Marker({map:e}),i&&this.sendDataToController(t[0].geometry.location.lat(),t[0].geometry.location.lng());else{const t={lat:this.options.defaultLat,lng:this.options.defaultLng};e.setCenter(t),i&&this.sendDataToController(this.options.defaultLat,this.options.defaultLng)}})).catch()}sendDataToController(t,e){this._client.post(this.options.customerUrl,JSON.stringify({city:this.form.elements["locator[place]"].value+", Schweiz",distance:this.form.elements["locator[distance]"].value,lat:t,lng:e,handlerpoints:this.form.elements.handlerpoints.value}),this._onLoaded.bind(this))}isCookieIsSet(t,e=null,o=!1){let i=n.Z.querySelector(t.el,this.options.cookieIsNotSetMessageSelector,!1),s=n.Z.querySelector(t.el,this.options.googleMapInnerSelector,!1);if(!i||!s)return;if("cookie"!==this.options.privacyMode)return this._displayCookieIsNotSetMessage(s,i,!1),void this._setGoogleMapScript();let r=!1!==a.Z.getItem("store-locator-cookie");e&&(r=o),!1===r?this._displayCookieIsNotSetMessage(s,i):(this._displayCookieIsNotSetMessage(s,i,!1),this._setGoogleMapScript())}_displayCookieIsNotSetMessage(t,e,o=!0){o?(e.classList.contains("d-none")&&e.classList.remove("d-none"),t.classList.contains("d-none")||t.classList.add("d-none")):(e.classList.contains("d-none")||e.classList.add("d-none"),t.classList.contains("d-none")&&t.classList.remove("d-none"))}_setGoogleMapScript(){if(this.mapIntialization=n.Z.querySelector(document,this.options.googleMapInitializationSelector,!1),this.mapIntializationAll=n.Z.querySelectorAll(document,this.options.googleMapInitializationSelector,!1),!this.mapIntialization)return;let t=document.createElement("script");const e=this;this.mapIntialization.appendChild(t),t.onload=function(){e._afterScriptLoaded()},1===this.mapIntialization.children.length?t.src="https://maps.googleapis.com/maps/api/js?v=3.exp&key="+this.options.apiKey:document.$emitter.subscribe("afterScriptLoaded",(()=>{this._initialize()}))}_afterScriptLoaded(){return document.$emitter.publish("afterScriptLoaded"),this._initialize(),""}_initialize(){this.form=n.Z.querySelector(this.el,this.options.formSelector,!1),this.initVars(),this.registerEvents(),this.createGoogleMap()}_onLoaded(t){const e=JSON.parse(t);if(!1===e.success)if("no data"===e.error){document.getElementById("error_data").style.display="flex"}else{document.getElementById("error_permission").style.display="flex"}else{document.getElementById("error_data").style.display="none";document.getElementById("error_permission").style.display="none",this.createGoogleMap(),this.deleteMarker(),this.bounds=new this.maps.LatLngBounds,this.markers=this.createMarker(e.data),this.registerMarkerListeners(this.markers)}if(null!==this.form.elements["locator[place]"].value||""!==this.form.elements["locator[place]"].value){const t=new this.maps.Geocoder;this.geocodeAddress(t,this.map,this.form.elements["locator[place]"].value,!1)}}createGoogleMap(){if(this.mapDiv=n.Z.querySelector(this.el,this.options.map,!1),this.mapDiv){if(null!==this.options.mapCenterLocation||""!==this.options.mapCenterLocation||"1"===this.options.storeLocatorElement){const t=new this.maps.Geocoder;this.maps.event.addListener(window,"load",(()=>{this.geocodeAddress(t,this.map,this.options.mapCenterLocation,!1)}))}navigator.geolocation&&this.loadingMapOnce&&(navigator.geolocation.getCurrentPosition((t=>{this.myPosition=new this.maps.LatLng(t.coords.latitude,t.coords.longitude),this.bounds.extend(this.myPosition),this.lat=n.Z.querySelector(this.el,this.options.lat,!1),this.lng=n.Z.querySelector(this.el,this.options.lng,!1),this.initSearch=n.Z.querySelector(this.el,this.options.initSearch,!1),this.mapRequest(),this.map=new this.maps.Map(this.mapDiv,{zoom:parseInt(this.options.zoomFactor,10),center:this.myPosition,streetViewControl:!1,zoomControl:!0,zoomControlOptions:{position:this.google.maps.ControlPosition.LEFT_CENTER}}),""!==this.options.homeIcon?this.marker=new this.maps.Marker({position:this.myPosition,map:this.map,icon:this.options.homeIcon,optimized:!1}):this.marker=new this.maps.Marker({position:this.myPosition,map:this.map,icon:{url:"https://maps.google.com/mapfiles/ms/icons/green-dot.png"}})})),this.loadingMapOnce=!1),this.map||(this.map=new this.maps.Map(this.mapDiv,{zoom:parseInt(this.options.zoomFactor,10),center:new this.maps.LatLng(this.options.defaultLat,this.options.defaultLng),streetViewControl:!1,zoomControl:!0,zoomControlOptions:{position:this.google.maps.ControlPosition.LEFT_CENTER}}),this.lat=n.Z.querySelector(this.el,this.options.lat,!1),this.lng=n.Z.querySelector(this.el,this.options.lng,!1),this.initSearch=n.Z.querySelector(this.el,this.options.initSearch,!1),this.mapRequest()),200===parseInt(this.form.elements["locator[distance]"].value,10)&&parseInt(this.options.zoomFactor,10)>3?this.map.setZoom(parseInt(this.options.zoomFactor,10)-2):150===parseInt(this.form.elements["locator[distance]"].value,10)&&parseInt(this.options.zoomFactor,10)>2?this.map.setZoom(parseInt(this.options.zoomFactor,10)-1):this.map.setZoom(parseInt(this.options.zoomFactor,10))}}createMarker(t){this.markers=[];const e=Object.values(Object.entries(t.elements));for(let t=0;t<e.length;t++){let o=e[t][1];if(this.options.groupId===o.storeGroupId||(!this.options.groupId||""===this.options.groupId)&&!this.options.storeDetailId||this.options.storeDetailId===o.id){const t=new this.maps.LatLng(o.latitude,o.longitude);let e="";if(o&&o.storeGroup){let t="",i="",s="",n="",r="";t=o.storeGroup.iconWidth?o.storeGroup.iconWidth:parseInt(this.options.iconWidth),i=o.storeGroup.iconHeight?o.storeGroup.iconHeight:parseInt(this.options.iconHeight),s=o.storeGroup.iconAnchorLeft?o.storeGroup.iconAnchorLeft:parseInt(this.options.iconAnchorLeft),n=o.storeGroup.iconAnchorRight?o.storeGroup.iconAnchorRight:parseInt(this.options.iconAnchorRight),r=o.storeGroup.icon&&o.storeGroup.icon.url?o.storeGroup.icon.url:this.options.storeIcon,e={origin:new google.maps.Point(0,0),url:r,scaledSize:new google.maps.Size(t,i),anchor:new google.maps.Point(s,n)},e.url&&""!==e.url||(e="")}else this.options.storeIcon&&(e={url:this.options.storeIcon,scaledSize:new google.maps.Size(this.options.iconWidth,this.options.iconHeight),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(this.options.iconAnchorLeft,this.options.iconAnchorRight)},e.url&&""!==e.url||(e=""));const i="Handler mit Cine-Produkten"===o.handlerpoints?"blue":"red",s=new this.maps.Marker({position:t,map:this.map,icon:`https://maps.google.com/mapfiles/ms/icons/${i}-dot.png`,optimized:!1});s.set("companyName",o.translated.name),s.set("department",o.translated.department),s.set("street",o.street),s.set("zipcode",o.zipcode),s.set("city",o.city),null==o.country.translated.name&&""===o.country.translated.name||s.set("country",o.country.translated.name),null==o.phone&&""===o.phone||s.set("phone",o.translated.phone),null==o.email&&""===o.email||s.set("email",o.translated.email),null==o.url&&""===o.url||s.set("url",o.translated.url),null==o.opening_hours&&""===o.opening_hours||s.set("opening_hours",o.translated.opening_hours),this.markers.push(s)}}return this.markers}registerMarkerListeners(t){this.infoWindow=n.Z.querySelector(this.el,this.options.infoWindow,!1);const e=Object.values(t);for(let t=0;t<e.length;t++){const o=this.showMarkerInfo(e[t]);e[t].addListener("click",(()=>{this.isInfoWindowOpen(this.infoWindow.map)?this.infoWindow.content!==o?(this.infoWindow=new this.maps.InfoWindow({content:o}),this.options.encryptedMail&&google.maps.event.addListener(this.infoWindow,"domready",this._registerEncodedEmailEvent.bind(this)),this.infoWindow.open(this.map,e[t])):this.infoWindow.close():(this.infoWindow=new this.maps.InfoWindow({content:o}),this.options.encryptedMail&&google.maps.event.addListener(this.infoWindow,"domready",this._registerEncodedEmailEvent.bind(this)),this.infoWindow.open(this.map,e[t]))}))}this.maps.event.addListener(this.map,"click",(()=>{try{this.infoWindow.close()}catch(t){return}}))}isInfoWindowOpen(t){return null!=t}showMarkerInfo(t){const e=t.get("companyName"),o=t.get("department"),i=t.get("street"),s=t.get("zipcode"),n=t.get("city"),r=t.get("country"),a=t.get("phone"),l=t.get("opening_hours");let c=t.get("email"),h=t.get("url"),p=" ";if("1"===this.options.showCompanyName&&e.trim()&&("h1"===this.options.storeInformationHeadline&&(p="<h1><strong>"+e+"</strong></h1>"),"h2"===this.options.storeInformationHeadline&&(p="<h2><strong>"+e+"</strong></h2>"),"h3"===this.options.storeInformationHeadline&&(p="<h3><strong>"+e+"</strong></h3>"),"h4"===this.options.storeInformationHeadline&&(p="<h4><strong>"+e+"</strong></h4>"),"h5"===this.options.storeInformationHeadline&&(p="<h5><strong>"+e+"</strong></h5>"),"h6"===this.options.storeInformationHeadline&&(p="<h6><strong>"+e+"</strong></h6>")),"1"===this.options.showDepartment&&null!=o&&o.trim()&&(p=p+"<span>"+o+"</span><br>"),"1"===this.options.showStreet&&i.trim()&&(p=p+"<span>"+i+"</span><br>"),"1"===this.options.showZipcode&&"1"===this.options.showCity&&s.trim()&&n.trim()?s.trim()&&n.trim()?p=p+"<span>"+s+" "+n+"</span><br>":!s.trim()&&n.trim()?p=p+"<span>"+n+"</span><br>":s.trim()&&!n.trim()&&(p=p+"<span>"+s+"</span><br>"):"1"===this.options.showZipcode&&"1"!==this.options.showCity&&s.trim()?p=p+"<span>"+s+"</span><br>":"1"!==this.options.showZipcode&&"1"!==this.options.showCity&&n.trim()&&(p=p+"<span>"+n+"</span><br>"),"1"===this.options.showCountry&&r.trim()&&(p=p+"<span>"+r+"</span><br>"),p+='<div style="margin-top:2%;"></div>',"1"===this.options.showPhoneNumber&&null!=a&&a.trim()){p=p+'<span><strong><a href="tel:'+a.replace(/\s/g,"")+'">'+a+"</a></strong></span><br>"}return"1"===this.options.showMail&&null!=c&&c.trim()&&(this.options.encryptedMail&&(c=this._encryptStoreData(c)),p=p+'<span><strong><a class="'+this.options.mailClass.substring(1)+'" data-mail="'+c+'" href="mailto:'+c+'" target="_blank"><span className="icon icon-envelope"> <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24" height="24" viewBox="0 0 24 24"><defs><path d="m3.7438 5 7.1093 4.9765a2 2 0 0 0 2.2938 0L20.2562 5H3.7438zM22 6.2207l-7.7062 5.3943a4 4 0 0 1-4.5876 0L2 6.2207V18c0 .5523.4477 1 1 1h18c.5523 0 1-.4477 1-1V6.2207zM3 3h18c1.6569 0 3 1.3431 3 3v12c0 1.6569-1.3431 3-3 3H3c-1.6569 0-3-1.3431-3-3V6c0-1.6569 1.3431-3 3-3z" id="icons-default-envelope"></path></defs><use xlink:href="#icons-default-envelope" fill="#758CA3" fill-rule="evenodd"></use></svg></span></a></strong></span><br>'),"1"===this.options.showURL&&null!=h&&h.trim()&&(!0!==h.includes("https://")&&!0!==h.includes("http://")&&(h="https://"+h),p=p+'<span><strong><a href="'+h+'" target="_blank">'+h.replace(/^(?:https?:\/\/)/,"")+"</a></strong></span><br>"),"1"===this.options.showOpening&&null!=l&&l.trim()&&(p=p+'<div style="margin-top:6%; margin-bottom: -4%;">'+l+"</div><br>"),'<div id="content" class="acris-store-locator-detail-information" style="margin:4%; min-width: '+this.options.widthInfowindow+"px; min-height: "+this.options.heightInfowindow+'px;">'+p+"</div>"}deleteMarker(){this.infoWindow=n.Z.querySelector(this.el,this.options.infoWindow,!1);for(var t=0;t<this.markers.length;t++)this.markers[t].setMap(null)}_registerEncodedEmailEvent(){const t=r.Z.isTouchDevice()?"touchstart":"click";if(this.mail=n.Z.querySelectorAll(this.el,this.options.mailClass,!1),this.mail&&this.mail.length>0)for(let e=0;e<this.mail.length;e++)this.mail[e].addEventListener(t,this._onSendingEmail.bind(this,this.mail[e]))}_onSendingEmail(t,e){if(e.preventDefault(),t&&t.dataset&&t.dataset.mail){let e=t.dataset.mail.replace(/[a-zA-Z]/g,(function(t){return String.fromCharCode((t<="Z"?90:122)>=(t=t.charCodeAt(0)+10)?t:t-26)}));location.href=this.options.mailTo+e}}_encryptStoreData(t,e=16,o={}){const i={};for(var s in o)i[o[s]]=s,i[s]=o[s];for(var n=0;n<26;n++)i[String.fromCharCode(65+n)]=String.fromCharCode(65+(n+e)%26),i[String.fromCharCode(97+n)]=String.fromCharCode(97+(n+e)%26);return t.split("").map((t=>i[t]||t)).join("")}}!function(t,e,o){(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var i=o.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o}(g,"options",{apiKey:"",privacyMode:"",formSelector:"#search-stores",submitButton:"#submitButton",map:"#gmap_canvas",infoWindow:"#shop-infowindow",shopsResultList:"#shops-result-list",cookieIsNotSetMessageSelector:".acris-store-locator-cookie-not-accepted",googleMapInnerSelector:".acris-store-locator-map-container-inner",googleMapInitializationSelector:"#acris-store-locator-map-initialization",lat:"#lat",lng:"#lng",initSearch:"#initsearch",defaultLat:48.323488,defaultLng:14.361175,errorClass:"has--error",customerUrl:"",mapCenterLocation:"",zoomFactor:"",widthInfowindow:"",heightInfowindow:"",showCompanyName:"",showDepartment:"",showStreet:"",showZipcode:"",showCity:"",showCountry:"",showPhoneNumber:"",showMail:"",showURL:"",showOpening:"",storeIcon:"",homeIcon:"",groupId:"",storeDetailId:"",iconWidth:30,iconHeight:50,iconAnchorLeft:15,iconAnchorRight:50,storeInformationHeadline:"h4",storeLocatorElement:"",storeLocatorLongitude:"",storeLocatorLatitude:"",storeLocatorBackUpAddressName:"",encryptedMail:!1,mailClass:".acris-store-locator-map-encrypted-email",mailTo:"mailto:"});class v extends i.Z{init(){this.registerEvents()}registerEvents(){if(this.options.encryptedMail){const t=r.Z.isTouchDevice()?"touchstart":"click";if(this.mail=n.Z.querySelectorAll(this.el,this.options.mailClass,!1),this.mail&&this.mail.length>0)for(let e=0;e<this.mail.length;e++)this.mail[e].addEventListener(t,this._onSendingEmail.bind(this,this.mail[e]))}}_onSendingEmail(t,e){if(e.preventDefault(),t&&t.dataset&&t.dataset.mail){let e=t.dataset.mail.replace(/[a-zA-Z]/g,(function(t){return String.fromCharCode((t<="Z"?90:122)>=(t=t.charCodeAt(0)+10)?t:t-26)}));location.href=this.options.mailTo+e}}}!function(t,e,o){(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var i=o.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o}(v,"options",{encryptedMail:!1,storeId:"",mailClass:".acris-store-locator-mail",mailTo:"mailto:"});class C extends i.Z{init(){this.options.inputId&&(this.submitButton=n.Z.querySelector(this.el,"#confirmFormSubmit",!1),this.fieldToValidate=n.Z.querySelector(document,"#"+this.options.inputId,!1),this.submitButton&&this.fieldToValidate&&(this.fieldToValidate.classList.remove("validated"),this._registerSubmitButtonEvent()))}_registerSubmitButtonEvent(){const t=r.Z.isTouchDevice()?"touchstart":"click";this.submitButton.addEventListener(t,this.setValidationClass.bind(this))}setValidationClass(){this.fieldToValidate.classList.add("validated")}}!function(t,e,o){(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var i=o.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o}(C,"options",{inputId:""}),window.PluginManager.register("AcrisStoreLocator",g,"[data-acris-store-locator]"),window.PluginManager.register("AcrisStoreLocatorDetail",v,"[data-acris-store-locator-detail]"),window.PluginManager.override("CookieConfiguration",d,"[data-cookie-permission]"),window.PluginManager.register("AcrisFormValidationHelper",C,"[data-acris-form-validation-helper]")},8553:(t,e,o)=>{o.d(e,{Du:()=>h,UK:()=>p,ZP:()=>d});var i=o(6285),s=o(7606),n=o(2615),r=o(3637),a=o(7474),l=o(8254),c=o(4690);const h="CookieConfiguration_Update",p="CookieConfiguration_CloseOffCanvas";class d extends i.Z{init(){this.lastState={active:[],inactive:[]},this._httpClient=new l.Z,this._registerEvents()}_registerEvents(){const{submitEvent:t,buttonOpenSelector:e,customLinkSelector:o,globalButtonAcceptAllSelector:i}=this.options;Array.from(document.querySelectorAll(e)).forEach((e=>{e.addEventListener(t,this.openOffCanvas.bind(this))})),Array.from(document.querySelectorAll(o)).forEach((e=>{e.addEventListener(t,this._handleCustomLink.bind(this))})),Array.from(document.querySelectorAll(i)).forEach((e=>{e.addEventListener(t,this._acceptAllCookiesFromCookieBar.bind(this))}))}_registerOffCanvasEvents(){const{submitEvent:t,buttonSubmitSelector:e,buttonAcceptAllSelector:o,wrapperToggleSelector:i}=this.options,n=this._getOffCanvas();if(n){const r=n.querySelector(e),a=n.querySelector(o),l=Array.from(n.querySelectorAll('input[type="checkbox"]')),c=Array.from(n.querySelectorAll(i));r&&r.addEventListener(t,this._handleSubmit.bind(this,s.Z)),a&&a.addEventListener(t,this._acceptAllCookiesFromOffCanvas.bind(this,s.Z)),l.forEach((e=>{e.addEventListener(t,this._handleCheckbox.bind(this))})),c.forEach((e=>{e.addEventListener(t,this._handleWrapperTrigger.bind(this))}))}}_handleCustomLink(t){t.preventDefault(),this.openOffCanvas()}_handleUpdateListener(t,e){const o=this._getUpdatedCookies(t,e);document.$emitter.publish(h,o)}_getUpdatedCookies(t,e){const{lastState:o}=this,i={};return t.forEach((t=>{o.inactive.includes(t)&&(i[t]=!0)})),e.forEach((t=>{o.active.includes(t)&&(i[t]=!1)})),i}openOffCanvas(t){const{offCanvasPosition:e}=this.options,o=window.router["frontend.cookie.offcanvas"],i=a.Z.isXS();this._hideCookieBar(),n.Z.open(o,!1,this._onOffCanvasOpened.bind(this,t),e,void 0,void 0,i)}closeOffCanvas(t){n.Z.close(),"function"==typeof t&&t()}_onOffCanvasOpened(t){this._registerOffCanvasEvents(),this._setInitialState(),this._setInitialOffcanvasState(),PluginManager.initializePlugins(),"function"==typeof t&&t()}_hideCookieBar(){const t=PluginManager.getPluginInstances("CookiePermission");t&&t[0]&&(t[0]._hideCookieBar(),t[0]._removeBodyPadding())}_setInitialState(t=null){const e=t||this._getCookies("all"),o=[],i=[];e.forEach((({cookie:t,required:e})=>{s.Z.getItem(t)||e?o.push(t):i.push(t)})),this.lastState={active:o,inactive:i}}_setInitialOffcanvasState(){const t=this.lastState.active,e=this._getOffCanvas();t.forEach((t=>{const o=e.querySelector(`[data-cookie="${t}"]`);o.checked=!0,this._childCheckboxEvent(o)}))}_handleWrapperTrigger(t){t.preventDefault();const{entriesActiveClass:e,entriesClass:o,groupClass:i}=this.options,{target:s}=t,n=this._findParentEl(s,o,i);if(n){n.classList.contains(e)?n.classList.remove(e):n.classList.add(e)}}_handleCheckbox(t){const{parentInputClass:e}=this.options,{target:o}=t;(o.classList.contains(e)?this._parentCheckboxEvent:this._childCheckboxEvent).call(this,o)}_findParentEl(t,e,o=null){for(;t&&!t.classList.contains(o);){if(t.classList.contains(e))return t;t=t.parentElement}return null}_isChecked(t){return!!t.checked}_parentCheckboxEvent(t){const{groupClass:e}=this.options,o=this._isChecked(t),i=this._findParentEl(t,e);this._toggleWholeGroup(o,i)}_childCheckboxEvent(t){const{groupClass:e}=this.options,o=this._isChecked(t),i=this._findParentEl(t,e);this._toggleParentCheckbox(o,i)}_toggleWholeGroup(t,e){Array.from(e.querySelectorAll("input")).forEach((e=>{e.checked=t}))}_toggleParentCheckbox(t,e){const{parentInputSelector:o}=this.options,i=Array.from(e.querySelectorAll(`input:not(${o})`)),s=Array.from(e.querySelectorAll(`input:not(${o}):checked`));if(i.length>0){const t=e.querySelector(o);if(t){const e=s.length>0,o=e&&s.length!==i.length;t.checked=e,t.indeterminate=o}}}_handleSubmit(){const t=this._getCookies("active"),e=this._getCookies("inactive"),{cookiePreference:o}=this.options,i=[],n=[];e.forEach((({cookie:t})=>{n.push(t),s.Z.getItem(t)&&s.Z.removeItem(t)})),t.forEach((({cookie:t,value:e,expiration:o})=>{i.push(t),t&&e&&s.Z.setItem(t,e,o)})),s.Z.setItem(o,"1","30"),this._handleUpdateListener(i,n),this.closeOffCanvas(document.$emitter.publish(p))}acceptAllCookies(t=!1){if(!t)return this._handleAcceptAll(),void this.closeOffCanvas();c.Z.create(this.el);const e=window.router["frontend.cookie.offcanvas"];this._httpClient.get(e,(t=>{const e=(new DOMParser).parseFromString(t,"text/html");this._handleAcceptAll(e),c.Z.remove(this.el),this._hideCookieBar()}))}_acceptAllCookiesFromCookieBar(){return this.acceptAllCookies(!0)}_acceptAllCookiesFromOffCanvas(){return this.acceptAllCookies()}_handleAcceptAll(t=null){const e=this._getCookies("all",t);this._setInitialState(e);const{cookiePreference:o}=this.options;e.forEach((({cookie:t,value:e,expiration:o})=>{t&&e&&s.Z.setItem(t,e,o)})),s.Z.setItem(o,"1","30"),this._handleUpdateListener(e.map((({cookie:t})=>t)),[])}_getCookies(t="all",e=null){const{cookieSelector:o}=this.options;return e||(e=this._getOffCanvas()),Array.from(e.querySelectorAll(o)).filter((e=>{switch(t){case"all":return!0;case"active":return this._isChecked(e);case"inactive":return!this._isChecked(e);default:return!1}})).map((t=>{const{cookie:e,cookieValue:o,cookieExpiration:i,cookieRequired:s}=t.dataset;return{cookie:e,value:o,expiration:i,required:s}}))}_getOffCanvas(){const t=r.Z?r.Z.getOffCanvas():[];return!!(t&&t.length>0)&&t[0]}}var u,m,f;u=d,m="options",f={offCanvasPosition:"left",submitEvent:"click",cookiePreference:"cookie-preference",cookieSelector:"[data-cookie]",buttonOpenSelector:".js-cookie-configuration-button button",buttonSubmitSelector:".js-offcanvas-cookie-submit",buttonAcceptAllSelector:".js-offcanvas-cookie-accept-all",globalButtonAcceptAllSelector:".js-cookie-accept-all-button",wrapperToggleSelector:".offcanvas-cookie-entries span",parentInputSelector:".offcanvas-cookie-parent-input",customLinkSelector:`[href="${window.router["frontend.cookie.offcanvas"]}"]`,entriesActiveClass:"offcanvas-cookie-entries--active",entriesClass:"offcanvas-cookie-entries",groupClass:"offcanvas-cookie-group",parentInputClass:"offcanvas-cookie-parent-input"},(m=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var i=o.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(m))in u?Object.defineProperty(u,m,{value:f,enumerable:!0,configurable:!0,writable:!0}):u[m]=f},2615:(t,e,o)=>{o.d(e,{Z:()=>a});var i=o(3637),s=o(8254),n=o(7906);let r=null;class a extends i.Z{static open(t=!1,e=!1,o=null,s="left",n=!0,r=i.Z.REMOVE_OFF_CANVAS_DELAY(),a=!1,l=""){if(!t)throw new Error("A url must be given!");i.r._removeExistingOffCanvas();const c=i.r._createOffCanvas(s,a,l,n);this.setContent(t,e,o,n,r),i.r._openOffcanvas(c)}static setContent(t,e,o,i,l){const c=new s.Z;super.setContent(`<div class="offcanvas-content-container">${n.Z.getTemplate()}</div>`,i,l),r&&r.abort();const h=t=>{super.setContent(t,i,l),"function"==typeof o&&o(t)};r=e?c.post(t,e,a.executeCallback.bind(this,h)):c.get(t,a.executeCallback.bind(this,h))}static executeCallback(t,e){"function"==typeof t&&t(e),window.PluginManager.initializePlugins()}}},3637:(t,e,o)=>{o.d(e,{Z:()=>h,r:()=>c});var i=o(9658),s=o(2005),n=o(1966);const r="offcanvas",a=350;class l{constructor(){this.$emitter=new s.Z}open(t,e,o,i,s,n,r){this._removeExistingOffCanvas();const a=this._createOffCanvas(o,n,r,i);this.setContent(t,i,s),this._openOffcanvas(a,e)}setContent(t,e,o){const i=this.getOffCanvas();i[0]&&(i[0].innerHTML=t,this._registerEvents(o))}setAdditionalClassName(t){this.getOffCanvas()[0].classList.add(t)}getOffCanvas(){return document.querySelectorAll(`.${r}`)}close(t){const e=this.getOffCanvas();n.Z.iterate(e,(t=>{bootstrap.Offcanvas.getInstance(t).hide()})),setTimeout((()=>{this.$emitter.publish("onCloseOffcanvas",{offCanvasContent:e})}),t)}goBackInHistory(){window.history.back()}exists(){return this.getOffCanvas().length>0}_openOffcanvas(t,e){l.bsOffcanvas.show(),window.history.pushState("offcanvas-open",""),"function"==typeof e&&e()}_registerEvents(t){const e=i.Z.isTouchDevice()?"touchend":"click",o=this.getOffCanvas();n.Z.iterate(o,(e=>{const i=()=>{setTimeout((()=>{e.remove(),this.$emitter.publish("onCloseOffcanvas",{offCanvasContent:o})}),t),e.removeEventListener("hide.bs.offcanvas",i)};e.addEventListener("hide.bs.offcanvas",i)})),window.addEventListener("popstate",this.close.bind(this,t),{once:!0});const s=document.querySelectorAll(".js-offcanvas-close");n.Z.iterate(s,(o=>o.addEventListener(e,this.close.bind(this,t))))}_removeExistingOffCanvas(){l.bsOffcanvas=null;const t=this.getOffCanvas();return n.Z.iterate(t,(t=>t.remove()))}_getPositionClass(t){return"left"===t?"offcanvas-start":"right"===t?"offcanvas-end":`offcanvas-${t}`}_createOffCanvas(t,e,o,i){const s=document.createElement("div");if(s.classList.add(r),s.classList.add(this._getPositionClass(t)),!0===e&&s.classList.add("is-fullwidth"),o){const t=typeof o;if("string"===t)s.classList.add(o);else{if(!Array.isArray(o))throw new Error(`The type "${t}" is not supported. Please pass an array or a string.`);o.forEach((t=>{s.classList.add(t)}))}}return document.body.appendChild(s),l.bsOffcanvas=new bootstrap.Offcanvas(s,{backdrop:!1!==i||"static"}),s}}const c=Object.freeze(new l);class h{static open(t,e=null,o="left",i=!0,s=350,n=!1,r=""){c.open(t,e,o,i,s,n,r)}static setContent(t,e=!0,o=350){c.setContent(t,e,o)}static setAdditionalClassName(t){c.setAdditionalClassName(t)}static close(t=350){c.close(t)}static exists(){return c.exists()}static getOffCanvas(){return c.getOffCanvas()}static REMOVE_OFF_CANVAS_DELAY(){return a}}}},t=>{t.O(0,["vendor-node","vendor-shared"],(()=>{return e=161,t(t.s=e);var e}));t.O()}]);