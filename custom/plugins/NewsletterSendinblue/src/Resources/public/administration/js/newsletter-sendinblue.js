!function(e){var n={};function t(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,t),o.l=!0,o.exports}t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:i})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(t.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)t.d(i,o,function(n){return e[n]}.bind(null,o));return i},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p=(window.__sw__.assetPath + '/bundles/newslettersendinblue/'),t(t.s="PSQz")}({"4Xg/":function(e){e.exports=JSON.parse('{"sw-privileges":{"additional_permissions":{"system":{"sendinblue":"Brevo"}}},"sendinblue":{"header":"Brevo","general":{"mainMenuItemGeneral":"Brevo","mainHeader":"Brevo","accountConfigurationTitle":"Settings","conversionTrackingTitle":"Conversion-Tracking"},"settingForm":{"connectToSib":"Connect to Brevo","salesChannels":"Sales channel","pluginSettings":"Plugin Settings","disconnectButton":"Disconnect","conversionTrackingSwitch":"Activate","buttonLabelSave":"Save","buttonLabelConfirm":"Confirm","buttonLabelCancel":"Cancel","titleSaveSuccess":"Settings","titleSaveError":"Settings Error","titleDisconnectDialog":"Disconnect","messageDisconnectDialog":"Do you really want to disconnect?","messageSaveSuccess":"Settings saved successfully","messageSaveError":"Settings are not saved","messageConnectedSuccess":"Connected successfully with company ID: ","messageConnectedError":"Not connected"}}}')},PSQz:function(e,n,t){"use strict";t.r(n);t("htGI");var i=Shopware.Mixin;Shopware.Component.register("sendinblue-index",{template:'{% block sendinblue_index %}\n    <sw-page class="sendinblue-container">\n\n        {# header start #}\n        {% block sendinblue_index_header %}\n            <template slot="smart-bar-header">\n                <h2> {{ $tc(\'sendinblue.general.mainHeader\') }}</h2>\n            </template>\n        {% endblock %}\n        {# header start #}\n\n        {# content start #}\n        {% block sendinblue_index_content %}\n            <sw-card-view slot="content">\n\n                {% block sendinblue_account_configuration %}\n                    <sw-card :title="$tc(\'sendinblue.general.accountConfigurationTitle\')" :isLoading="isLoading">\n                        <sw-container columns="1fr 1fr 1fr">\n                            <div></div>\n                            {# sales channel start #}\n                            {% block sendinblue_sales_channel %}\n                                <sw-sales-channel-switch\n                                        :label="$tc(\'sendinblue.settingForm.salesChannels\')"\n                                        @change-sales-channel-id="onSalesChannelChanged"\n                                />\n                            {% endblock %}\n                            {# sales channel end #}\n                        </sw-container>\n\n                        <sw-container columns="1fr 1fr 1fr">\n                            <div></div>\n                            {# main button start #}\n                            {% block sendinblue_main_button %}\n                                <sw-button variant="primary" target="_blank" :link="setting.mainButtonLink" class="sendinblue-main-button">\n                                    {{ isConnected ? $tc(\'sendinblue.settingForm.pluginSettings\'): $tc(\'sendinblue.settingForm.connectToSib\') }}\n                                </sw-button>\n                            {% endblock %}\n                            {# main button end #}\n                        </sw-container>\n                        <div></div>\n\n                    </sw-card>\n                {% endblock %}\n\n            </sw-card-view>\n\n        {% endblock %}\n        {# content end #}\n    </sw-page>\n{% endblock %}\n',inject:["ConnectionService"],mixins:[i.getByName("notification")],data:function(){return{setting:{connectionMessage:"",connectionIconName:"",connectionIconColor:"",mainButtonLink:""},salesChannelId:null,isConnected:!1,isLoading:!0,mainButtonTitle:"",isAccountConfigLoading:!0,userConnectionId:null}},created:function(){this.setMainButtonLink()},computed:{},methods:{setMainButtonLink:function(){var e=this;this.ConnectionService.getConnectionSettingsLink(this.salesChannelId).then((function(n){n.success?(e.isConnected=n.connected,e.setting.mainButtonLink=n.link):e.createNotificationError({title:e.$tc("sendinblue.settingForm.titleSaveError"),message:"".concat(n.error)}),e.isLoading=!1,e.isAccountConfigLoading=!1}))},onSalesChannelChanged:function(e){this.isLoading=!0,this.salesChannelId=e,this.setMainButtonLink()}},metaInfo:function(){return{title:this.$createTitle()}}});var o=t("UL8U"),r=t("4Xg/");function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function a(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(o=i.key,r=void 0,r=function(e,n){if("object"!==s(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var i=t.call(e,n||"default");if("object"!==s(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(o,"string"),"symbol"===s(r)?r:String(r)),i)}var o,r}function l(e,n){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,n){return e.__proto__=n,e})(e,n)}function u(e){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,i=g(e);if(n){var o=g(this).constructor;t=Reflect.construct(i,arguments,o)}else t=i.apply(this,arguments);return d(this,t)}}function d(e,n){if(n&&("object"===s(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Shopware.Module.register("sendinblue-app",{type:"plugin",name:"Brevo",title:"Brevo",description:"sendinblue.general.descriptionTextModule",version:"1.0.0",targetVersion:"1.0.0",color:"#9AA8B5",icon:"regular-cog",snippets:{"de-DE":o,"en-GB":r},routes:{index:{component:"sendinblue-index",path:"index",meta:{parentPath:"sw.settings.index",privilege:"system.sendinblue"}}},settingsItem:[{group:"plugins",to:"sendinblue.app.index",icon:"regular-cog",backgroundEnabled:!0,privilege:"system.sendinblue"}],extensionEntryRoute:{extensionName:"NewsletterSendinblue",route:"sendinblue.app.index"}});var f=Shopware.Classes.ApiService,b=function(e){!function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),n&&l(e,n)}(r,e);var n,t,i,o=u(r);function r(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"sendinblue";return c(this,r),o.call(this,e,n,t)}return n=r,(t=[{key:"testConnection",value:function(){}},{key:"getConnectionSettingsLink",value:function(e){var n="".concat(this.getApiBasePath(),"/settings");return null!==e&&(n+="?sid="+e),this.httpClient.get(n,{headers:this.getBasicHeaders()}).then((function(e){return f.handleResponse(e)}))}}])&&a(n.prototype,t),i&&a(n,i),Object.defineProperty(n,"prototype",{writable:!1}),r}(f),p=Shopware.Application;p.addServiceProvider("ConnectionService",(function(e){var n=p.getContainer("init");return new b(n.httpClient,e.loginService)}))},UL8U:function(e){e.exports=JSON.parse('{"sw-privileges":{"additional_permissions":{"system":{"sendinblue":"Brevo"}}},"sendinblue":{"header":"Brevo","general":{"mainMenuItemGeneral":"Brevo","mainHeader":"Brevo","accountConfigurationTitle":"Einstellungen","conversionTrackingTitle":"Conversion-Tracking"},"settingForm":{"connectToSib":"Mit Brevo verbinden","salesChannels":"Verkaufskanäle","pluginSettings":"Plugin Settings","disconnectButton":"Disconnect","conversionTrackingSwitch":"Aktivieren","buttonLabelSave":"Speichern","buttonLabelConfirm":"Bestätigen","buttonLabelCancel":"Abbrechen","titleSaveSuccess":"Einstellungen","titleSaveError":"Einstellungen Fehler","titleDisconnectDialog":"Verbindung Trennenung","messageDisconnectDialog":"Wollen Sie wirklich die Verbindung trennen?","messageSaveSuccess":"Die Einstellungen wurden erfolgreich gespeichert","messageSaveError":"Die Einstellungen konnten nicht gespeichert werden","messageConnectedSuccess":"Erfolgreich verbunden. Company ID: ","messageConnectedError":"Nicht verbunden"}}}')},htGI:function(e,n){Shopware.Service("privileges").addPrivilegeMappingEntry({category:"additional_permissions",parent:null,key:"system",roles:{sendinblue:{privileges:[],dependencies:[]}}})}});